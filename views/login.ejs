<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" href="logo/logo.png" />

        <title>Connexion sur la Panel</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css"
            rel="stylesheet" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
            crossorigin="anonymous">
        <link rel="stylesheet" href="/css/login.css">

    </head>

    <body>
        <div class="wrapper">
            <div class="logo">
                <img src="/logo/logo.png" alt="">
            </div>
            <div class="text-center mt-4 name">
                IDEAL<span class="text-danger">AUTO</span>
            </div>
            <form class="p-3 mt-3" action="/login" method="POST">
                <% if(error) { %>
                    <p class="text-danger">E-mail ou mot de
                        passe incorrecte</p>
                    <% } %>
                        <div class="form-field d-flex align-items-center">
                            <span class="far fa-user"></span>
                            <input id="username" name="username" required
                                placeholder="Email">
                                <div id="suggesstion-box" ></div>
                            <span class="text-danger" id="email_error"></span>
                        </div>
                        <div class="form-field">
                            <span class="fas fa-key"></span>
                            <input type="password" value="develop" d="password"
                                name="password" required placeholder="Mot de
                                passe">
                        </div>
                        <button class="btn mt-3" type="submit" id="Connexion">Connexion</button>
                    </form>
                </div>

                <script
                    src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
                <script
                    src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
                <script
                    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
                    crossorigin="anonymous"></script>

                <script>

            $(document).ready(function() {
                $("#username").keyup(function() {
                    fetch('/auto-complete', {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    })
                        .then(res => {
                            if (res.ok) return res.json()
                        })
                        .then(response => {
                            $("#suggesstion-box").show();
                           
                            $("#suggesstion-box").html(response);
                            //$("#username").css("background", "#FFF");
                        }).catch(err => {
                           alert(err.message);
                        });

                });
            });
            //To select a country name
            function selectUser(val,password) {
                $("#username").val(val);
                $("#password").val(password);
                $("#suggesstion-box").hide();
            }

        </script>
            </body>

        </html>